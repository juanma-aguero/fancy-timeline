/*! Fancy-TimeLine vBETA.1.2 http://juanma-aguero.github.com/fancy-timeline/ */
(function(a){a.fn.fancyTimeline=function(b){var c=0;var d=0;var e=0;var f=0;var g=20;e=350;var h=50;html='<div id="timeline" class="timeline">';html+='	<div id="timeline-slider"></div>';html+="		<div>";html+='    		<div id="timeline-dates-line"></div>';html+='    		<div id="timeline-dates"></div>';html+="		</div>";html+='	<div id="backward" class="arrow" ><span><</span></div>';html+='	<div id="forward" class="arrow" ><span>></span></div>';html+="</div>";a(this).append(html);var i={positionTo:function(b){var c=window.innerWidth/2;var d=a("#pointer-date-"+b).offset();var e=d.left-c;var f=a("#timeline-dates").offset();var g=f.left-e-a("#timeline").offset().left;a("#timeline-dates").animate({left:g},400)},sliderTo:function(b){a(".timeline-item").removeClass("active");a(".pointer-date").animate({height:20,borderLeftWidth:"2px",top:0},100);a(".date").animate({marginTop:0,marginLeft:-10},100);a(".date-focus").toggleClass("date-focus",100);var d=window.innerWidth/2;var f=a("#date-"+b).offset();var g=f.left-d;var h=a("#timeline-slider").offset();var j=h.left-g-a("#timeline").offset().left-e/2;i.positionTo(b);a("#timeline-slider").animate({left:j},800);a("#date-"+b).toggleClass("active",500);a("#pointer-date-"+b).animate({height:45,borderLeftWidth:"5px",top:-11},300);a("#pointer-"+b).animate({marginTop:15,marginLeft:-20},200);a("#pointer-"+b).toggleClass("date-focus",200);c=b},moveForward:function(){if(c<d){i.sliderTo(c+1)}else{i.sliderTo(0)}},moveBackward:function(){if(c>0){i.sliderTo(c-1)}else{i.sliderTo(d)}}};var j="";var k="";var l=b.data;d=l.length-1;a("#middle").css("left",window.innerWidth/2-a("#timeline").offset().left);var m=(g+e)*(l.length+1);a("#timeline-slider").css("width",m);var n=h*(l.length+1);a("#timeline-dates").css("width",n);var o=0;for(o=0;o<l.length;o++){var p=l[o];var q="";if(p.type=="default"){q+='<div id="date-'+o+'" class="timeline-item item-default" >';q+='<div class="timeline-item-content" >';q+='<span class="title"">'+p.title+"</span>";q+=p.content;q+="</div>";q+="</div>"}j+=q;k+='<div class="date-container">';k+='<div class="pointer-date" id="pointer-date-'+o+'" />';k+='<div class="pointer-date-separator" />';k+='<div class="pointer-date-separator" />';k+='<div class="pointer-date-separator" /><br/>';k+='<a class="date" id="pointer-'+o+'">';k+=p.marker;k+="</a>";k+="</div>"}a("#timeline-slider").html(j);a("#timeline-dates").html(k);a(".date").bind("click",function(){var b=a(this).attr("id").split("-");i.sliderTo(b[1])});a(".timeline-item-i").bind("click",function(){a(this).next().toggle()});a("#backward").bind("click",i.moveBackward);a("#forward").bind("click",i.moveForward);i.sliderTo(f)}})(jQuery)
